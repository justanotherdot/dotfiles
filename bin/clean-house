#!/bin/bash
#
# A small script to do some arch house cleaning
# ! Must be run as root
#
# (c) 2016 Ryan James Spencer

if [ `id -u` != "0" ]; then
    echo "This script must be run with root priviledges." 1>&2
    exit 1
else
    if [[ ! -n $(pacman -Qdt) ]]; then
        echo "No orphans to remove."
    else
        sudo pacman -Rns $(pacman -Qdtq)
    fi
    paccache -rvk1 # same as `sudo pacman -Sc` but verbose
    pacman-optimize && sync
    updatedb
fi
